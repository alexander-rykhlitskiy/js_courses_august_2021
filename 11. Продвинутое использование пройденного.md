## Новый синтаксис JavaScript. Декструктуризация

https://learn.javascript.ru/destructuring

```js
let nameParts = ["Илья", "Муромец"];
let [firstName, lastName] = nameParts;
// Оператор "rest":
nameParts = ["Юлий", "Цезарь", "Император", "Рима"];
let [firstName, lastName, ...rest] = nameParts;

function log(a, b, c) {
  console.log(a);
  console.log(b);
  console.log(c);
}
// Оператор "spread":
log(...[1, 2, 3]);
log(1, 2, 3);

let options = {
  title: "Меню",
  width: 100,
  height: 200,
};

let { title, width, height } = options;

let a = 1;
let b = 2;
console.log({ a, b }); // => {a: 1, b: 2}

function log({ a, b }) {
  console.log("a - " + a);
  console.log("b - " + b);
}

let obj = { a: 10, b: 20 };
log(obj);
```

## Переменная - не ящик, а провод

#### Задание

Попробуйте догадаться, что выведет этот код?

```js
let a = 10;
let b = a;
b = 5;
console.log(a);
```

Другая удобная метафора для описания переменных: переменная - не ящик, а провод, который связывает имя переменной со значением: \
https://raw.githubusercontent.com/alexander-rykhlitskiy/js_courses/master/images/lesson_10_variable-wire.jpg

### Даже два провода в случае с объектами

https://learn.javascript.ru/object#kopirovanie-po-ssylke

#### Задание

Попробуйте догадаться, что выведет этот код?

```js
let a = { name: "misha" };
let b = a;
b.name = "sergei";
console.log(a);
```

В случае с объектами к проводу-переменной добавляется провод-указатель: \
https://raw.githubusercontent.com/alexander-rykhlitskiy/js_courses/master/images/lesson_10_variable-wire-object.jpg

## Метод массива reduce

https://learn.javascript.ru/array-iteration#reduce-reduceright

```js
[1, 2, 3, 4, 5].reduce((total, x) => {
  console.log(total, x);
  return total + x;
});

[1, 2, 3, 4, 5].reduce((total, x) => {
  console.log(total, x);
  return total + x;
}, 10);

[1, 2, 3, 4, 5].reduce((total, x) => {
  total[x] = x;
  return total;
}, {});
```

#### Задание

Перемножить все элементы массива.

```js
[1, 2, 3]; //=> 6
```

Решение

```js
[1, 2, 3, 4, 5].reduce((total, x) => total * x);
```

#### Задание

Из массива строк сформировать объект, в котором ключи (имена полей) - это сами строки, значения - длины строк

```js
["1", "22"]; //=> { '1': 1, '22': 2 }
```

Решение

```js
["A", "АГ", "tom", "alex"].reduce((total, x) => {
  total[x] = x.length;
  return total;
}, {});
```

## Заголовки и методы HTTP

HTTP запрос:

1\. URL (https://www.google.com/search?q=javascript) \
1.1. Протокол/protocol (https) \
1.2. Домен/domain (www.google.com) \
1.3. Путь/path (/search) \
1.4. Вопрос/query (q=javascript)

2\. Заголовки (дополнительная информация про запрос). Например, имя операционной системы, имя браузера, тип контента, который ожидает клиент (json, html).

3\. Метод

Для запроса используется только URL и заголовки: \
1.1. GET - получение данных

Для следующих запросов используется URL и заголовки, а также тело запроса (body): \
1.2. POST - добавление новых данных \
1.3. PUT - обновление существующих данных \
1.4. DELETE - удаление данных

и другие.

```js
var xmlHttp = new XMLHttpRequest();
xmlHttp.onload = function () {
  document.body.innerText = xmlHttp.responseText;
};

// GET
xmlHttp.open("GET", "https://todoappexamplejs.herokuapp.com/items");
// клиент при отправке запроса говорит серверу, что клиент принимает (Accept) тип данных json (полное название - application/json)
xmlHttp.setRequestHeader("Accept", "application/json");
xmlHttp.send();

// POST
xmlHttp.open("POST", "https://todoappexamplejs.herokuapp.com/items");
// клиент при отправке запроса говорит серверу, что тип отправляемых данных (Content-Type) - json (полное название - application/json)
xmlHttp.setRequestHeader("Content-Type", "application/json");
// "Accept", "application/json" значит то же самое, что и в предыдущем примере
xmlHttp.setRequestHeader("Accept", "application/json");
xmlHttp.send('{"title": "Title", "done": true, "category": "cat"}');

// PUT
xmlHttp.open("PUT", "https://todoappexamplejs.herokuapp.com/items/2");
xmlHttp.setRequestHeader("Content-Type", "application/json");
xmlHttp.setRequestHeader("Accept", "application/json");
xmlHttp.send('{"title": "New Title"}');

// DELETE
xmlHttp.open("DELETE", "https://todoappexamplejs.herokuapp.com/items/12");
xmlHttp.setRequestHeader("Accept", "application/json");
xmlHttp.send();
```

#### Задание

1\. При загрузке страницы создавать задачу методом POST. Title - ваше имя. \
Возвращаемое после запроса JSON содержимое записать в тег div.

2\. Добавить кнопку "Обновить", при нажатии на которую отправляется запрос PUT на урл "https://todoappexamplejs.herokuapp.com/items/${id}, который пришел в ответе на POST запрос}". \
Тело запроса - JSON, в котором title - текущее время. \
После обновления текст кнопки нужно проставить в "Обновлено".

3\. Добавить кнопку "Удалить", при нажатии на которую отправляется запрос DELETE на урл из предыдущей подзадачи, но уже без тела запроса. \
После удаления текст кнопки нужно проставить в "Удалено".

Результат каждого шага проверять на этой странице https://todoappexamplejs.herokuapp.com/items

Начальный HTML:

<body>
  <div></div>
  <button class='update'>Обновить</button>
  <button class='delete'>Удалить</button>
</body>

```js
let xmlHttp = new XMLHttpRequest();
xmlHttp.onload = function () {
  document.body.querySelector("div").innerText = xmlHttp.responseText;
};
// POST
xmlHttp.open("POST", "https://todoappexamplejs.herokuapp.com/items");
xmlHttp.setRequestHeader("Content-Type", "application/json");
xmlHttp.setRequestHeader("Accept", "application/json");
xmlHttp.send(JSON.stringify({ title: "alex" }));

let updateButton = document.querySelector(".update");
updateButton.addEventListener("click", function () {
  let xmlHttp = new XMLHttpRequest();
  xmlHttp.onload = () => (updateButton.innerText = "Обновлено");
  // PUT
  let id = JSON.parse(document.body.querySelector("div").innerText).id;
  xmlHttp.open("PUT", "https://todoappexamplejs.herokuapp.com/items/" + id);
  xmlHttp.setRequestHeader("Content-Type", "application/json");
  xmlHttp.setRequestHeader("Accept", "application/json");
  xmlHttp.send(JSON.stringify({ title: new Date() }));
});

let deleteButton = document.querySelector(".delete");
deleteButton.addEventListener("click", function () {
  let xmlHttp = new XMLHttpRequest();
  xmlHttp.onload = () => (deleteButton.innerText = "Удалено");
  // DELETE
  let id = JSON.parse(document.body.querySelector("div").innerText).id;
  xmlHttp.open("DELETE", "https://todoappexamplejs.herokuapp.com/items/" + id);
  xmlHttp.setRequestHeader("Accept", "application/json");
  xmlHttp.send();
});
```
