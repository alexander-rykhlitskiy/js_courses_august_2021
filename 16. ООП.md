## ООП
https://developer.mozilla.org/ru/docs/Learn/JavaScript/Objects/Object-oriented_JS

1. Модульность. Когда спустило колесо, нужно искать проблему в колесе. Так легче предотвращать карго-культы.
2. Объект

2.1 Поле

2.2 Метод

```js
let car = { color: 'red' };
car.go = function() { console.log(`${this.color} car goes`); }
car.stop = function() { console.log(`${this.color} car stopped`); }
car.go();
```

https://learn.javascript.ru/object-methods#sokraschyonnaya-zapis-metoda

```js
let car = {
  go() {
    console.log(`${this.color} car goes`);
  },
  stop() {
    console.log(`${this.color} car stopped`);
  }
}
car.go();
```
#### 2.3 Конструктор
https://learn.javascript.ru/constructor-new

```js
function Car(color) {
  // this = {};  (неявно)
  this.color = color;
  this.go = function() { console.log(`${this.color} car goes`); }
  this.stop = function() { console.log(`${this.color} car stopped`); }
  // return this;  (неявно)
}

let car = new Car('red');
```

#### ЗАДАНИЕ
Создать конструктор, который возвращает любой объект из жизни с одним свойством и одним методом.

#### ЗАДАНИЕ

Создайте функцию-конструктор Calculator, который создаёт объекты с тремя методами:
- read() запрашивает два значения при помощи prompt и сохраняет их значение в свойствах объекта.
- sum() возвращает сумму введённых свойств.
- mul() возвращает произведение введённых свойств.

```js
function Calculator() {
  this.read = function() {
    this.a = +prompt('a?', 0);
    this.b = +prompt('b?', 0);
  };

  this.sum = function() {
    return this.a + this.b;
  };

  this.mul = function() {
    return this.a * this.b;
  };
}

let calculator = new Calculator();
calculator.read();

alert("Sum=" + calculator.sum());
alert("Mul=" + calculator.mul());
```

### Классы
https://learn.javascript.ru/class

```js
class Car {
  constructor(color) {
    // this = {};
    this.color = color;
    // return this;
  }

  go() {
    console.log(`${this.color} car goes`);
  }

  stop() {
    console.log(`${this.color} car stopped`);
  }
}
let car = new Car('red'); // значение 'red' передается в конструктор в качестве параметра color

// Синтаксис такой же, как в методах объекта, только в классах между методами не нужна запятая. Сравните:
let car = {
  go() {
    console.log(`${this.color} car goes`);
  },
  stop() {
    console.log(`${this.color} car stopped`);
  }
}
```

#### Задание
Создайте класс Calculator, который создаёт объекты с
конструктором, который запрашивает два значения при помощи prompt и сохраняет их значение в свойствах объекта, и двумя методами:
- sum() возвращает сумму введённых свойств.
- mul() возвращает произведение введённых свойств.

### Наследование классов
https://learn.javascript.ru/class-inheritance

```js
class Animal {
  constructor(color) {
    this.color = color;
    console.log('I am a dog!');
  }

  say() {
    console.log('open mouth');
  }
}

class Dog extends Animal {
  constructor(color) {
    super(color);
    console.log('I am a dog!');
  }

  say() {
    super.say();
    console.log('say bark');
  }
}

let dog = new Dog();
dog.say();
```

#### Задание
https://todoappexamplejs.herokuapp.com/items
В ООП стиле описать получение (запрос GET) и обновление (запрос PUT) задачи из списка TODO по заданному id.
1. Должен быть реализован базовый класс BaseRequest, в котором должен быть реализован метод perform, который отправляет запрос и возвращает промис
2. От него должны наследоваться 2 класса, GetRequest, PutRequest, в которых определяются методы, которые возвращают специифические для этого вида запроса данные. Например, метод requestType, который вернет "GET" или "POST" в зависимости от класса
3. Весь общий код и общие строки (например, домен сайта) нужно разместить в базовом классе. Для этого можно определять методы в BaseRequest, которые будут вызываться в его наследниках
4. Конструктор класса должен принимать как минимум один параметр, id задачи
5. Конструктор класс PutRequest может также принимать параметр body
6. Проверить результат выполнения можно таким образом

```js
let request = new GetRequest(118);
request.perform().then(data => console.log(data))
```

```js
class BaseRequest {
  BASE_URI = 'https://todoappexamplejs.herokuapp.com/items/'

  constructor(id) {
    this.id = id;
  }

  perform() {
    let promise = fetch(this.BASE_URI + this.id, this._requestOptions());
    promise = promise.then(response => response.json());
    return promise;
  }

  _requestOptions() {
    const result = {
      method: this.requestType(),
      headers: {
        'Content-Type': 'application/json',
        'Accept': 'application/json'
      }
    };
    return result;
  }
}

class GetRequest extends BaseRequest {
  requestType() {
    return 'GET';
  }
}

class PutRequest extends BaseRequest {
  constructor(id, body) {
    super(id, body);
    this.body = body;
  }

  requestType() {
    return 'PUT';
  }

  _requestOptions() {
    return {...super._requestOptions(), ...{ body: JSON.stringify(this.body) }};
  }
}

let request = new GetRequest(118);
request.perform().then(data => console.log(data))

let putRequest = new PutRequest(118, { title: 'blabla' });
putRequest.perform().then(data => console.log(data))
```

#### Задание
Переписать задачу с BaseRequest используя async-await

```js
class BaseRequest {
  BASE_URI = 'https://todoappexamplejs.herokuapp.com/items/'

  constructor(id) {
    this.id = id;
  }

  async perform() {
    const fetchPromise = await fetch(this.BASE_URI + this.id, this._requestOptions());
    return await fetchPromise.json();
  }

  _requestOptions() {
    const result = {
      method: this.requestType(),
      headers: {
        'Content-Type': 'application/json',
        'Accept': 'application/json'
      }
    };
    return result;
  }
}

document.querySelector('button').addEventListener('click', async function(event) {
  let request = new GetRequest(118);
  let data = await request.perform();
  console.log(data);
})
```
